<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>A320 — Exámenes por bloques (2023) con clave integrada</title>
<style>
  :root { --b:#0f62fe; --ok:#1e8e3e; --ko:#d93025; --muted:#667; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
  h1 { margin: 0 0 6px; }
  .meta { color:#555; margin-bottom: 16px; }
  .block { border:1px solid #e6e6e6; border-radius:12px; padding: 14px; margin: 14px 0; }
  .block-header { display:flex; flex-wrap:wrap; align-items:center; justify-content:space-between; gap: 12px; }
  .btn { padding: 8px 12px; border: 1px solid #ddd; border-radius: 8px; background: #fff; cursor: pointer; }
  .btn.primary { background: var(--b); border-color: var(--b); color:#fff; }
  .badge { display:inline-block; padding: 2px 8px; border-radius: 999px; background:#f3f3f3; font-size:12px; }
  .q-card { border:1px solid #eee; border-radius: 10px; padding: 12px; }
  .q-title { font-weight: 600; margin-bottom: 8px; }
  .answers { display:flex; gap:10px; flex-wrap:wrap; }
  .answer { padding: 8px 12px; border:1px solid #ccc; border-radius: 8px; cursor:pointer; user-select:none; background:#fff; }
  .answer.correct { background: #e6f7e6; border-color: #57b857; }
  .answer.wrong { background: #fde7e7; border-color: #e15b5b; }
  .answer.disabled { opacity:.75; pointer-events:none; }
  .hint { margin-top: 6px; font-size: 12px; color:#555; display:none; }
  .grid-qs { display:grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 12px; }
</style>
</head>
<body>
<h1>A320 — Exámenes por bloques (2023)</h1>
<div class="meta">
  Clave integrada a partir de tu listado. Detectadas <b>810</b> claves (rango 1–810).
</div>

<div id="blocks"></div>

<script>
const KEY = {"1": "B", "2": "C", "3": "D", "4": "D", "5": "D", "6": "B", "7": "B", "8": "C", "9": "A", "10": "A", "11": "A", "12": "A", "13": "A", "14": "B", "15": "D", "16": "A", "17": "B", "18": "B", "19": "A", "20": "C", "21": "D", "22": "B", "23": "D", "24": "B", "25": "B", "26": "A", "27": "C", "28": "C", "29": "B", "30": "B", "31": "B", "32": "B", "33": "D", "34": "B", "35": "C", "36": "A", "37": "B", "38": "B", "39": "D", "40": "B", "41": "A", "42": "B", "43": "C", "44": "C", "45": "B", "46": "C", "47": "B", "48": "C", "49": "D", "50": "C", "51": "D", "52": "D", "53": "A", "54": "C", "55": "C", "56": "B", "57": "C", "58": "C", "59": "B", "60": "C", "61": "B", "62": "D", "63": "B", "64": "B", "65": "C", "66": "B", "67": "D", "68": "C", "69": "D", "70": "D", "71": "D", "72": "C", "73": "C", "74": "D", "75": "B", "76": "B", "77": "D", "78": "A", "79": "C", "80": "B", "81": "D", "82": "A", "83": "B", "84": "C", "85": "C", "86": "D", "87": "D", "88": "A", "89": "D", "90": "A", "91": "A", "92": "D", "93": "D", "94": "D", "95": "A", "96": "D", "97": "D", "98": "D", "99": "D", "100": "D", "101": "D", "102": "B", "103": "A", "104": "D", "105": "C", "106": "B", "107": "B", "108": "C", "109": "A", "110": "C", "111": "B", "112": "B", "113": "C", "114": "B", "115": "C", "116": "C", "117": "D", "118": "A", "119": "A", "120": "A", "121": "B", "122": "D", "123": "B", "124": "C", "125": "A", "126": "C", "127": "B", "128": "D", "129": "D", "130": "C", "131": "B", "132": "D", "133": "B", "134": "D", "135": "D", "136": "B", "137": "D", "138": "A", "139": "C", "140": "C", "141": "C", "142": "C", "143": "C", "144": "B", "145": "B", "146": "D", "147": "A", "148": "D", "149": "C", "150": "D", "151": "B", "152": "C", "153": "B", "154": "B", "155": "C", "156": "A", "157": "A", "158": "C", "159": "C", "160": "A", "161": "C", "162": "B", "163": "C", "164": "B", "165": "B", "166": "D", "167": "C", "168": "D", "169": "C", "170": "B", "171": "C", "172": "D", "173": "D", "174": "C", "175": "C", "176": "C", "177": "B", "178": "D", "179": "D", "180": "C", "181": "C", "182": "A", "183": "C", "184": "C", "185": "B", "186": "A", "187": "D", "188": "A", "189": "B", "190": "C", "191": "A", "192": "B", "193": "A", "194": "C", "195": "B", "196": "C", "197": "D", "198": "C", "199": "B", "200": "D", "201": "D", "202": "A", "203": "C", "204": "C", "205": "A", "206": "B", "207": "D", "208": "D", "209": "C", "210": "A", "211": "C", "212": "A", "213": "B", "214": "D", "215": "D", "216": "A", "217": "B", "218": "A", "219": "D", "220": "D", "221": "C", "222": "C", "223": "B", "224": "A", "225": "B", "226": "C", "227": "B", "228": "C", "229": "B", "230": "A", "231": "C", "232": "A", "233": "B", "234": "A", "235": "B", "236": "C", "237": "D", "238": "B", "239": "D", "240": "A", "241": "D", "242": "C", "243": "C", "244": "B", "245": "C", "246": "C", "247": "B", "248": "C", "249": "B", "250": "B", "251": "D", "252": "B", "253": "D", "254": "A", "255": "D", "256": "B", "257": "B", "258": "C", "259": "D", "260": "D", "261": "D", "262": "B", "263": "B", "264": "D", "265": "D", "266": "B", "267": "D", "268": "B", "269": "A", "270": "A", "271": "C", "272": "D", "273": "B", "274": "D", "275": "A", "276": "A", "277": "C", "278": "B", "279": "C", "280": "C", "281": "C", "282": "D", "283": "C", "284": "B", "285": "D", "286": "B", "287": "D", "288": "D", "289": "C", "290": "B", "291": "D", "292": "A", "293": "D", "294": "C", "295": "A", "296": "C", "297": "B", "298": "C", "299": "B", "300": "A", "301": "A", "302": "D", "303": "C", "304": "D", "305": "A", "306": "A", "307": "A", "308": "B", "309": "B", "310": "B", "311": "B", "312": "D", "313": "C", "314": "A", "315": "D", "316": "D", "317": "B", "318": "B", "319": "B", "320": "B", "321": "B", "322": "C", "323": "C", "324": "D", "325": "A", "326": "D", "327": "D", "328": "C", "329": "C", "330": "B", "331": "C", "332": "D", "333": "D", "334": "D", "335": "D", "336": "D", "337": "C", "338": "D", "339": "D", "340": "A", "341": "C", "342": "B", "343": "D", "344": "A", "345": "A", "346": "B", "347": "D", "348": "C", "349": "D", "350": "C", "351": "B", "352": "C", "353": "A", "354": "D", "355": "D", "356": "D", "357": "A", "358": "B", "359": "C", "360": "D", "361": "A", "362": "A", "363": "A", "364": "B", "365": "C", "366": "D", "367": "B", "368": "B", "369": "C", "370": "A", "371": "D", "372": "D", "373": "D", "374": "D", "375": "D", "376": "D", "377": "D", "378": "B", "379": "B", "380": "B", "381": "D", "382": "D", "383": "A", "384": "C", "385": "A", "386": "B", "387": "D", "388": "B", "389": "C", "390": "C", "391": "A", "392": "C", "393": "D", "394": "A", "395": "A", "396": "D", "397": "D", "398": "D", "399": "C", "400": "B", "401": "A", "402": "B", "403": "D", "404": "C", "405": "A", "406": "D", "407": "A", "408": "D", "409": "D", "410": "D", "411": "D", "412": "C", "413": "C", "414": "C", "415": "D", "416": "D", "417": "D", "418": "D", "419": "C", "420": "A", "421": "A", "422": "A", "423": "B", "424": "D", "425": "D", "426": "C", "427": "A", "428": "D", "429": "D", "430": "B", "431": "C", "432": "C", "433": "C", "434": "C", "435": "D", "436": "D", "437": "A", "438": "C", "439": "B", "440": "A", "441": "C", "442": "A", "443": "C", "444": "B", "445": "B", "446": "B", "447": "C", "448": "B", "449": "A", "450": "A", "451": "D", "452": "A", "453": "A", "454": "D", "455": "D", "456": "A", "457": "B", "458": "C", "459": "C", "460": "C", "461": "C", "462": "C", "463": "C", "464": "D", "465": "A", "466": "B", "467": "B", "468": "C", "469": "C", "470": "B", "471": "D", "472": "A", "473": "D", "474": "A", "475": "B", "476": "C", "477": "A", "478": "B", "479": "A", "480": "B", "481": "C", "482": "D", "483": "C", "484": "D", "485": "D", "486": "D", "487": "B", "488": "D", "489": "B", "490": "B", "491": "D", "492": "A", "493": "C", "494": "D", "495": "C", "496": "C", "497": "D", "498": "A", "499": "A", "500": "C", "501": "D", "502": "B", "503": "A", "504": "C", "505": "C", "506": "D", "507": "D", "508": "C", "509": "A", "510": "C", "511": "D", "512": "B", "513": "D", "514": "D", "515": "B", "516": "B", "517": "D", "518": "D", "519": "C", "520": "C", "521": "C", "522": "A", "523": "D", "524": "B", "525": "A", "526": "A", "527": "D", "528": "A", "529": "B", "530": "B", "531": "A", "532": "D", "533": "C", "534": "A", "535": "B", "536": "A", "537": "B", "538": "B", "539": "B", "540": "C", "541": "A", "542": "A", "543": "B", "544": "B", "545": "B", "546": "A", "547": "C", "548": "A", "549": "D", "550": "B", "551": "D", "552": "C", "553": "B", "554": "D", "555": "C", "556": "C", "557": "D", "558": "A", "559": "B", "560": "A", "561": "A", "562": "C", "563": "B", "564": "B", "565": "D", "566": "D", "567": "D", "568": "B", "569": "B", "570": "B", "571": "C", "572": "C", "573": "B", "574": "C", "575": "C", "576": "A", "577": "B", "578": "C", "579": "D", "580": "B", "581": "D", "582": "D", "583": "C", "584": "A", "585": "D", "586": "C", "587": "C", "588": "D", "589": "A", "590": "D", "591": "B", "592": "D", "593": "A", "594": "A", "595": "C", "596": "A", "597": "C", "598": "C", "599": "A", "600": "A", "601": "B", "602": "B", "603": "D", "604": "D", "605": "D", "606": "B", "607": "D", "608": "A", "609": "C", "610": "D", "611": "B", "612": "A", "613": "C", "614": "A", "615": "A", "616": "C", "617": "C", "618": "B", "619": "D", "620": "A", "621": "B", "622": "A", "623": "A", "624": "D", "625": "A", "626": "C", "627": "D", "628": "D", "629": "B", "630": "A", "631": "B", "632": "D", "633": "C", "634": "D", "635": "C", "636": "B", "637": "C", "638": "B", "639": "D", "640": "C", "641": "A", "642": "D", "643": "D", "644": "B", "645": "D", "646": "C", "647": "A", "648": "C", "649": "C", "650": "B", "651": "B", "652": "B", "653": "B", "654": "B", "655": "D", "656": "D", "657": "C", "658": "D", "659": "C", "660": "B", "661": "C", "662": "C", "663": "C", "664": "B", "665": "A", "666": "A", "667": "C", "668": "A", "669": "D", "670": "B", "671": "C", "672": "C", "673": "D", "674": "D", "675": "D", "676": "A", "677": "A", "678": "C", "679": "B", "680": "C", "681": "B", "682": "D", "683": "D", "684": "C", "685": "C", "686": "D", "687": "C", "688": "A", "689": "B", "690": "C", "691": "A", "692": "D", "693": "C", "694": "D", "695": "D", "696": "B", "697": "B", "698": "A", "699": "B", "700": "D", "701": "D", "702": "A", "703": "D", "704": "C", "705": "A", "706": "B", "707": "B", "708": "D", "709": "A", "710": "C", "711": "B", "712": "A", "713": "B", "714": "D", "715": "D", "716": "A", "717": "B", "718": "C", "719": "B", "720": "B", "721": "D", "722": "C", "723": "A", "724": "D", "725": "D", "726": "A", "727": "A", "728": "D", "729": "B", "730": "B", "731": "B", "732": "C", "733": "B", "734": "D", "735": "A", "736": "B", "737": "C", "738": "B", "739": "C", "740": "D", "741": "C", "742": "A", "743": "D", "744": "D", "745": "A", "746": "C", "747": "D", "748": "A", "749": "D", "750": "D", "751": "B", "752": "C", "753": "D", "754": "A", "755": "B", "756": "B", "757": "A", "758": "C", "759": "D", "760": "C", "761": "A", "762": "A", "763": "D", "764": "C", "765": "D", "766": "B", "767": "D", "768": "A", "769": "D", "770": "D", "771": "D", "772": "C", "773": "D", "774": "C", "775": "A", "776": "B", "777": "A", "778": "A", "779": "D", "780": "D", "781": "A", "782": "A", "783": "B", "784": "A", "785": "B", "786": "C", "787": "D", "788": "B", "789": "D", "790": "A", "791": "C", "792": "B", "793": "C", "794": "A", "795": "D", "796": "D", "797": "D", "798": "B", "799": "A", "800": "B", "801": "A", "802": "D", "803": "D", "804": "B", "805": "C", "806": "D", "807": "D", "808": "B", "809": "D", "810": "B"};  // { pregunta: 'A'|'B'|'C'|'D' }
const BLOCKS = [[1, 490], [491, 598], [599, 680], [681, 739], [740, 770], [771, 795], [796, 810]];                // rangos

function makeBlock(start, end){
  let corrects = 0;
  let answered = 0;
  const total = end - start + 1;

  const sec = document.createElement('section');
  sec.className = 'block';
  sec.id = `block-${start}-${end}`;
  sec.innerHTML = `
    <div class="block-header">
      <h2>Test ${start}–${end}</h2>
      <div class="actions" style="display:flex; gap:8px; align-items:center; flex-wrap:wrap;">
        <span class="badge">Respondidas: <b id="ans-${start}-${end}">0</b> / ${total}</span>
        <span class="badge">Aciertos: <b id="ok-${start}-${end}">0</b></span>
        <span class="badge" id="nota-${start}-${end}">Nota: —</span>
        <button class="btn" id="reset-${start}-${end}">Reiniciar</button>
        <button class="btn primary" id="finish-${start}-${end}">Finalizar</button>
      </div>
    </div>
    <div class="grid-qs" id="qs-${start}-${end}"></div>
  `;

  const qs = sec.querySelector(`#qs-${start}-${end}`);

  for(let q=start; q<=end; q++){ 
    const card = document.createElement('div');
    card.className = 'q-card';
    card.dataset.q = q;
    const correct = KEY[q];
    card.innerHTML = `
      <div class="q-title">Pregunta ${q}</div>
      <div class="answers">
        ${['A','B','C','D'].map(L=>`<button class="answer" data-q="${q}" data-a="${L}">${L}</button>`).join('')}
      </div>
      <div class="hint" id="hint-${q}"></div>
    `;
    qs.appendChild(card);

    card.querySelectorAll('.answer').forEach(btn => {
      btn.addEventListener('click', ()=>{
        const a = btn.dataset.a;
        const buttons = card.querySelectorAll('.answer');
        const already = Array.from(buttons).some(b => b.classList.contains('disabled'));
        buttons.forEach(b => b.classList.add('disabled'));

        const hint = document.getElementById('hint-'+q);
        hint.style.display = 'block';
        if(a === correct){
          btn.classList.add('correct');
          hint.textContent = '¡Correcto!';
          if(!already) corrects++;
        } else {
          btn.classList.add('wrong');
          buttons.forEach(b=>{ if(b.dataset.a === correct) b.classList.add('correct'); });
          hint.textContent = 'Incorrecto. La correcta es ' + correct + '.';
        }
        if(!already) answered++;
        sec.querySelector(`#ans-${start}-${end}`).textContent = answered;
        sec.querySelector(`#ok-${start}-${end}`).textContent = corrects;
      });
    });
  }

  sec.querySelector(`#reset-${start}-${end}`).addEventListener('click', ()=>{
    corrects = 0; answered = 0;
    sec.querySelector(`#ans-${start}-${end}`).textContent = 0;
    sec.querySelector(`#ok-${start}-${end}`).textContent = 0;
    sec.querySelector(`#nota-${start}-${end}`).textContent = 'Nota: —';
    sec.querySelectorAll('.q-card').forEach(card => {
      card.querySelectorAll('.answer').forEach(b=> b.classList.remove('disabled','correct','wrong'));
      const h = card.querySelector('.hint'); h.style.display = 'none'; h.textContent = '';
    });
  });

  sec.querySelector(`#finish-${start}-${end}`).addEventListener('click', ()=>{
    const percent = Math.round((corrects / total) * 100);
    sec.querySelector(`#nota-${start}-${end}`).textContent = 'Nota: ' + percent + '%';
    // Completar las no respondidas mostrando la correcta
    sec.querySelectorAll('.q-card').forEach(card => {
      const q = parseInt(card.dataset.q,10);
      const corr = KEY[q];
      const buttons = card.querySelectorAll('.answer');
      const wasAnswered = Array.from(buttons).some(b => b.classList.contains('disabled'));
      if(!wasAnswered){
        buttons.forEach(b => b.classList.add('disabled'));
        buttons.forEach(b=>{ if(b.dataset.a === corr) b.classList.add('correct'); });
        const h = card.querySelector('.hint');
        h.style.display = 'block';
        h.textContent = 'Sin responder. La correcta es ' + corr + '.';
      }
    });
  });

  return sec;
}

(function init(){
  const container = document.getElementById('blocks');
  BLOCKS.forEach(([s,e]) => container.appendChild(makeBlock(s,e)));
})();
</script>
</body>
</html>
